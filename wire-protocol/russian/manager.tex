% !TeX spellcheck = ru_RU
\section{Менеджер}

В этом главе рассматриваются запросы, которых может генерировать менеджер при обращении к серверу (Forwards). Также и запросы которые менеджер может получить от сервера (Backwards).

\subsection{Forwards}

Список запросов к серверу:

\begin{icItems}
	\item \jsinline{list-tests};
	\item \jsinline{run-tests};
	\item \jsinline{cancel-running};
	\item \jsinline{is-running};
	\item \jsinline{get-progress};
	\item \jsinline{list-users};
	\item \jsinline{create-user};
	\item \jsinline{remove-user};
	\item \jsinline{change-password};
	\item \jsinline{list-sessions};
	\item \jsinline{create-session};
	\item \jsinline{remove-session};
	\item \jsinline{ensure-access};
	\item \jsinline{restrict-access};
	\item \jsinline{list-suites};
	\item \jsinline{get-suite};
	\item \jsinline{create-suite};
	\item \jsinline{remove-suite};
	\item \jsinline{edit-suite};
	\item \jsinline{run-suite};
	\item \jsinline{list-removes}.
	\item \jsinline{confirm-remove}.
\end{icItems}

\subsubsection{\jsinline{list-tests}}

Получает список тестов.

Принимает параметр \jsinline{session} (целое число) - идентификатор сессий.

\jsinline{payload} ответа содержит поле \jsinline{tests}, тип - список чисел, которая содержит идентификаторы всех тестов сессий.

\subsubsection{\jsinline{run-tests}}

Запускает выполнения всех тестов сессий.

Принимает параметр \jsinline{session} (целое число) - идентификатор сессий.

\subsubsection{\jsinline{cancel-running}}

Отменяет выполнение тестов.

Принимает параметр \jsinline{session} (целое число) - идентификатор сессий.

\subsubsection{\jsinline{is-running}}

Проверяет, выполняются ли в настоящее время тесты.

Принимает параметр \jsinline{session} (целое число) - идентификатор сессий.

\jsinline{payload} ответа содержит поле \jsinline{running}, тип - логическое значение, которая характеризует текущее состояние сервера.

\subsubsection{\jsinline{get-progress}}

Возвращает текущий прогресс и подписывает клиент на обновлений статуса. Когда тест завершается (удачно или нет), клиент будет осведомлён.

Принимает параметр \jsinline{session} (целое число) - идентификатор сессий.

\jsinline{payload} ответа содержит поле \jsinline{tests} (список тестов), где каждый тест может иметь одну или несколько из следующих полей отвечающий за выполнение теста в определённом браузере:

\begin{icItems}
	\item \jsinline{icL} - встроенный браузер;
	\item \jsinline{chrome} - Google Chrome;
	\item \jsinline{firefox} - Mozilla Firefox;
	\item \jsinline{edge} - Microsoft Edge;
	\item \jsinline{safari} - Safari.
\end{icItems}

Каждый тест имеет обязательное поле \jsinline{project} (целое число) - идентификатор проекта, отвечающий за тест.

\subsubsection{\jsinline{list-users}}

Возвращает список пользователей, созданных данным менеджером.

\jsinline{payload} ответа имеет поле \jsinline{users} - список строк, где каждая строка является именем пользователя.

\subsubsection{\jsinline{create-user}}

Создаёт новый пользователь.

Принимает следующее параметры:

\begin{icItems}
	\item \jsinline{username} (строка) - имя пользователя, может содержать только буквы английского языка, цифры и тире, максимальная длина - 32 символов;
	\item \jsinline{password} (строка) - любая строка до 32 символов, включая пустую строку.
\end{icItems}

\subsubsection{\jsinline{remove-user}}

Удаляет пользователя.

Принимает параметр \jsinline{username} (строка) - имя пользователя.

\subsubsection{\jsinline{change-password}}

Изменяет пароль пользователя.

\begin{icItems}
	\item \jsinline{username} (строка) - имя пользователя;
	\item \jsinline{password} (строка) - любая строка до 32 символов, включая пустую строку.
\end{icItems}

\subsubsection{\jsinline{list-sessions}}

Возвращаем список сессий созданных менеджером.

\jsinline{payload} ответа имеет поле \jsinline{sessions} - список чисел, где каждое число является идентификатором сессий.

\subsubsection{\jsinline{create-session}}

Создаёт новую сессию.

Принимает параметр \jsinline{name} (строка) - название сессии.

\subsubsection{\jsinline{remove-session}}

Удаляет сессию всё что связано с ней, кроме пользователей.

Принимает параметр \jsinline{id} (целое число) - идентификатор сессий.

\subsubsection{\jsinline{ensure-access}}

Открывает пользователю доступ к сессии.

Принимает следующие параметры:

\begin{icItems}
	\item \jsinline{session} (целое число) - идентификатор сессии;
	\item \jsinline{username} (строка) - имя пользователя.
\end{icItems}

\subsubsection{\jsinline{restrict-access}}

Закрывает пользователю доступ к сессии.

Принимает следующие параметры:

\begin{icItems}
	\item \jsinline{session} (целое число) - идентификатор сессии;
	\item \jsinline{username} (строка) - имя пользователя.
\end{icItems}

\subsubsection{\jsinline{list-suites}}

Получает список наборов тестов.

\jsinline{payload} ответа имеет поле \jsinline{suites} - список чисел, где каждое число является идентификатором набора тестов.

\subsubsection{\jsinline{get-suite}}

Получает данные набора тестов. 

Принимает параметр \jsinline{id} (целое число) - идентификатор набора тестов.

\subsubsection{\jsinline{create-suite}}

Создаёт новый набор тестов.

Получает параметр \jsinline{name} (строка) - название набора.

\jsinline{payload} ответа имеет поле \jsinline{suite} (целое число) - идентификатор нового набора тестов.

\subsubsection{\jsinline{remove-suite}}

Удаляет набор тестов.

Принимает параметр \jsinline{id} (целое число) - идентификатор набора тестов.

\subsubsection{\jsinline{edit-suite}}

Изменяет набор тестов.

Получает параметр \jsinline{tests} (массив чисел) - набор тестов в серии.

\subsubsection{\jsinline{run-suite}}

Выполняет все тесты набора.

Принимает параметр \jsinline{id} (целое число) - идентификатор набора тестов.

\subsubsection{\jsinline{list-removes}}

Получает список запросов на удаление для нужной сессии.

Принимает параметр \jsinline{id} (целое число) - идентификатор сессии.

\subsubsection{\jsinline{confirm-remove}}

Подтверждает удаление проекта.

Принимает параметр \jsinline{id} (целое число) - идентификатор проекта.
