% !TeX spellcheck = ru_RU
\section{Переменные}

\textbf{Переменная} - это пара "имя" - "значения". Каждая переменная в icL имеет область видимость (фрагмент кода где можно её использовать) и тип, который определяет диапазон и способ размещения значении переменной.

Имя переменной является идентификатором, начинающийся с \mintinline{icl}{@} или {\color{blue2}\mintinline{icl}{#}}.

\subsection{Объявления и инициализация переменных}

\textbf{Объявления и инициализация} переменных реализуется путём определений пар "имя" - "значение", имя от значений разделяется токеном \mintinline{icl}{=} и имеют общий вид \mintinline{icl}{var = value}, где \mintinline{icl}{var} имя, а \mintinline{icl}{value} - значение.

На листинге \ref{initexample} показаны несколько пример объявлений и инициализации переменных, обратите внимание что дробные числа пишется через точку, а не через запятую как принято в Европе и Российском Федераций.

\begin{sourcecode}
\captionof{listing}{Пример объявлений и инициализации переменных}
\label{initexample}
\begin{minted}[linenos]{icl}
@bool = false;
@catched = true;
@int = 234;
@double = 23.4;
#pi = 3.14;
#negative = -100.0;
\end{minted}
\end{sourcecode}

\subsection{Локальные переменные}

\textbf{Локальные переменные} имеют узкую область видимости, ограниченную фигурными скобками которые их охватывает, и только после их объявления.

{\bf Идентификаторы} локальных переменных начинается с символом \mintinline{icl}{@}.

На листинге \ref{localvars} показана область видимость переменной \mintinline{icl}{@var}, в точках объявления переменных \mintinline{icl}{@test1}, \mintinline{icl}{@test2} и \mintinline{icl}{@test6} - она не видна, когда в точках объявления переменных \mintinline{icl}{@test3}, \mintinline{icl}{@test4} и \mintinline{icl}{@test5} - да.
\begin{sourcecode}
\captionof{listing}{Область видимости локальных перемен}
\label{localvars}
\begin{minted}[linenos]{icl}
`` error
@test1 = @var;
if (@) {
	`` error
	@test2 = @var;
	`` initialization
	@var = 0;
	`` ok
	@test3 = @var;
	if (@) {
		`` ok
		@test4 = @var;
	}
	`` ok
	@test5 = @var;
}
`` error
@test6 = @var;
\end{minted}
\end{sourcecode}

\subsection{Глобальные переменные}

\textbf{Глобальные переменные} имеют самую широкую область видимости, их видны из любой точки программы после их инициализации. Использовать глобальные переменные не рекомендуется, так как они могут привести к серьезных ошибок.

{\bf Идентификаторы} глобальных переменных начинается с символом {\color{blue2}\mintinline{icl}{#}}. Локальные переменные с одинаковым названием могут быть несколько, когда глобальные - нет. Идентификатор глобальной переменной - уникальный.

Как указано на листинге \ref{globalvars}, в точках объявления переменных \mintinline{icl}{@test1}, \mintinline{icl}{@test2} и \mintinline{icl}{@test3} переменная \mintinline{icl}{@var} не видна, когда в точках объявления переменных \mintinline{icl}{@test4}, \mintinline{icl}{@test5} и \mintinline{icl}{@test6} - да.

\

\begin{sourcecode}
\captionof{listing}{Область видимости глобальных перемен}
\label{globalvars}
\begin{minted}[linenos]{icl}
`` error
@test1 = @var;
if (@) {
	`` error
	@test2 = @var;
	if (@) {
		`` error
		@test3 = @var;
		`` initialization
		@var = 0;
		`` ok
		@test4 = @var;
	}
	`` ok
	@test5 = @var;
}
`` ok
@test6 = @var;
\end{minted}
\end{sourcecode}

\subsection{Левые и правые значения в icL}

В icL присутствуют 3 типа значении:

\begin{icEnum}
\item
	левые значения ({\it lvalue}) - переменные;
\item
	правые значения ({\it rvalue}) - переменные и константы;
\item
	javascript значения ({\it jsvalue}) - их будем рассматривать позже.
\end{icEnum}

Левые значения могут находиться с обеих сторон знака {\it присваивание}, когда правые - только справа. Примеры правильно и неправильно кода иллюстрированы на листинге \ref{rlvalues};

\begin{sourcecode}
\captionof{listing}{Левые и правые значения}
\label{rlvalues}
\begin{minted}[linenos]{icl}
@a1 = @a2; @a3 = 123; `` ok
123 = @a1; 125 = 456; `` error
\end{minted}
\end{sourcecode}

\subsection{Запакованные значения}

{\bf Запакованные значения} используются для специальных операторов. Запаковать значения можно изолируя их в круглых скобок и разделяя запятой, самый простой пример использования запакованных значения это замена значения переменных - \mintinline{icl}{(@a, @b) = (@b.ensureRValue, @a.ensureRValue)}. Значения привязано к переменной, по этому мы должны преобразовать в правые значения (они независимые).

\subsection{Переменные @ и \#}

{Переменная @} - акроним для @stack и Stack'stack. Системная переменная которая служит, для того чтобы передать данные с родительского стекового контейнера дочернего и наоборот. 

{Переменная \#} - акроним для @console, результат выполнения команды сохраняется в данной переменной и возвращается в консоль или передаётся следующей команде.

\subsection{Выводы}

{\bf Работа с переменными в icL} - максимально проста, но продвинутых пользователях без знания в программировании рекомендуется не использовать глобальные переменные. Для написания сценариев средней и низкой сложности, локальные переменные лучше подходят.
