% !TeX spellcheck = ru_RU
\section{Множества}

{\bf Множества} (тип \set) позволяют хранить несколько объектов (тип \object) без повторений, для множеств доступны операции как пересечение, объединение.

\subsection{{\color{lightblue} object}}

Объект позволяет хранить несколько переменных, каждая хранимая переменная имеет тип и название. Доступ к переменным осуществляется через свойства объекта, где название свойств и есть название переменных. 

Поле объектов множества описаны в заголовке множества.

Значение типа \object{} - ссылочное значение, чтобы получить копию объект недостаточно присвоить его другой переменной, нужно его копировать (клонировать) используя следующий метод - \mintinline{icl}{object.clone () : object}.

\subsection{Свойства}

Множества имеют следующие свойства:
\begin{icItems}
\item \mintinline{icl}{[r/o] set'capacity : int};
\item \mintinline{icl}{[r/o] set'empty : bool};
\end{icItems}

\subsubsection{\mintinline{icl}{[r/o] set'capacity : int}}

Возвращает количество объектов которых можно хранить в память без дополнительных выделений.

\subsubsection{\mintinline{icl}{[r/o] set'empty : bool}}

Множество считается пустой если оно не содержит ни один объект.

\subsection{Методы}

Множество имеет следующие методы:
\begin{icItems}
\item \mintinline{icl}{set.applicate (data : list ...) : set};
\item \mintinline{icl}{set.clear () : set};
\item \mintinline{icl}{set.clone () : set};
\item \mintinline{icl}{set.getField (name : string) : list};
\item \mintinline{icl}{set.hasField (name : string) : bool};
\item \mintinline{icl}{set.insert (data : any ...) : set};
\item \mintinline{icl}{set.insert (obj : object) : set};
\item \mintinline{icl}{set.insertField (name : string, value : list, type = list)};
\item \mintinline{icl}{set.insertField (name : string, value : any, type = void)};
\item \mintinline{icl}{set.remove (data : any ...) : set};
\item \mintinline{icl}{set.remove (obj : object) : set};
\item \mintinline{icl}{set.removeField (name : string) : set}.
\end{icItems}

Код использующий выше перечисленных методов представлен на листинге \ref{setmethods};

\begin{sourcecode}
\captionof{listing}{Методы класса set}
\label{setmethods}
\begin{minted}[linenos]{icl}
@set = [age : int, name : string, sex : string]

@set.applicate (
	["23",    "45",     "67"],
	["Basil", "Nataly", "Siri"],
	["m",     "f",      "f"]);
``` set = [
    [age = 23, name = "Basil",  sex = "m"]
	[age = 45, name = "Nataly", sex = "f"]
	[age = 67, name = "Siri",   sex = "f"]
	] ```

@set.getField "name"; `` ["Basil", "Nataly", "Siri"]

@set.insert (34, "Critiano", "m");
``` set = [
    [age = 23, name = "Basil",     sex = "m"]
	[age = 45, name = "Nataly",    sex = "f"]
	[age = 67, name = "Siri",      sex = "f"]
	[age = 34, name = "Cristiano", sex = "m"]
	] ```

@set.insert [sex = "f", name = "Sofia", age = 19];
``` set = [
    [age = 23, name = "Basil",    sex = "m"]
	[age = 45, name = "Nataly",   sex = "f"]
	[age = 67, name = "Siri",     sex = "f"]
	[age = 34, name = "Cristiano" sex = "m"]
	[age = 19, name = "Sofia",    sex = "f"]
	] ```

@set.insertField ("parity", ["odd", "even"], string);
``` set = [
    [age = 23, name = "Basil",    sex = "m", parity = "odd"]
	[age = 45, name = "Nataly",   sex = "f", parity = "even"]
	[age = 67, name = "Siri",     sex = "f", parity = "odd"]
	[age = 34, name = "Cristiano" sex = "m", parity = "even"]
	[age = 19, name = "Sofia",    sex = "f", parity = "odd"]
	] ```

@set.remove (45, "Nataly", "f", "even");
``` set = [
    [age = 23, name = "Basil",    sex = "m", parity = "odd"]
	[age = 67, name = "Siri",     sex = "f", parity = "odd"]
	[age = 34, name = "Cristiano" sex = "m", parity = "even"]
	[age = 19, name = "Sofia",    sex = "f", parity = "odd"]
	] ```

@set.remove [age = 34, name = "Cristiano", sex = "m", parity = "even"];
``` set = [
    [age = 23, name = "Basil", sex = "m", parity = "odd"]
	[age = 67, name = "Siri",  sex = "f", parity = "odd"]
	[age = 19, name = "Sofia", sex = "f", parity = "odd"]
	] ```

@set.removeField "parity";
``` set = [
    [age = 23, name = "Basil", sex = "m"]
	[age = 67, name = "Siri",  sex = "f"]
	[age = 19, name = "Sofia", sex = "f"]
	] ```

@set.clear; `` set = []
\end{minted}
\end{sourcecode}

\subsubsection{\mintinline{icl}{set.applicate (data : list ...) : set}}

Количество полученных списков должна быть равна количеству полей объектов множества. Количество добавленных объектов будет ровна длине самого длинного списка из \mintinline{icl}{data}. Из списков в которых не хватает строк, элементы будут добавлены повторно.

Возможные исключения: \ferror{IncompatibleData} (см. таб. \ref{errors}).

\subsubsection{\mintinline{icl}{set.clear () : set}}

Очищает множество.

\subsubsection{\mintinline{icl}{set.clone () : set}}

Создаёт копию множества, путём копирования всех данных в другую область памяти.

\subsubsection{\mintinline{icl}{set.getField (name : string) : list}}

Возвращает список значений поле \mintinline{icl}{name} всех объектов.

Возможные исключения: \ferror{FieldNotFound} (см. таб. \ref{errors}).

\subsubsection{\mintinline{icl}{set.hasField (name : string) : bool}}

Возвращает \true, если заголовок содержит поле \mintinline{icl}{name}, иначе \false.

\subsubsection{\mintinline{icl}{set.insert (data : any ...) : set}}

Вставит новый объект, значения полей (массив \mintinline{icl}{data}) должна полностью соблюдать порядок и тип данных, определён заголовком множество.

Возможные исключения: \ferror{IncompatibleData} (см. таб. \ref{errors}).

\subsubsection{\mintinline{icl}{set.insert (obj : object) : set}}

Вставит новый объект, поля объекта \mintinline{icl}{obj} должна быть совместимы полностью с заголовком множество.

Возможные исключения: \ferror{IncompatibleObject} (см. таб. \ref{errors}).

\subsubsection{\mintinline{icl}{set.inserField (name : string, value : list, type = list)}}

Создаёт новое поле типа \mintinline{icl}{type}. \mintinline{icl}{values} может быть пустым списком только если множество пустая. Значений массива распределяется так же как и при использовании \mintinline{icl}{set.applicate}.

Возможные исключения: \ferror{FieldAlreadyExists} (см. таб. \ref{errors}).

\subsubsection{\mintinline{icl}{set.insertField (name : string, value : any, type = void)}}

Создаёт новое поле типа \mintinline{icl}{type}. Если \mintinline{icl}{type == void} то тип будет определён автоматически, но лучше указать его явно для исключения возможных проблем.

Возможные исключения: \ferror{FieldAlreadyExists} (см. таб. \ref{errors}).

\subsubsection{\mintinline{icl}{set.remove (data : any ...) : set}}

Удаляет объект, который подходит по описанию \mintinline{icl}{data}.

\subsubsection{\mintinline{icl}{set.remove (obj : object) : set}}

Удаляет объект \mintinline{icl}{obj} из множества.

\subsubsection{\mintinline{icl}{set.removeField (name : string) : set}}

Удаляет поле \mintinline{icl}{name} с заголовка.

Возможные исключения: \ferror{FieldNotFound} (см. таб. \ref{errors}).

%\newpage
