% !TeX spellcheck = ru_RU
\section{Преобразование типов}

Для преобразования данных в icL присутствуют 4 операторы первого ранга:
\begin{icItems}
	\item \mintinline{icl}{data : type : type};
	\item \mintinline{icl}{data :: type : bool};
	\item \mintinline{icl}{data :* type : bool};
	\item \mintinline{icl}{data :? type : type};
\end{icItems}

И 1 оператор 7-ого ранга \mintinline{icl}{date :! type : type}.

\subsubsection{\mintinline{icl}{data : type}}

Преобразует данные в нужном типа данных. Доступен следующее вариации:
\begin{icItems}
	\item \mintinline{icl}{value : type};
	\item \mintinline{icl}{(value...) : type};
	\item \mintinline{icl}{(value...) : (type...)};
\end{icItems}

\mintinline{icl}{value : type} - преобразует значение в нужном типа данных.

\mintinline{icl}{(value...) : type} - преобразует запакованные значения в запакованных значении нужного типа. Возвращает запакованные значения, они могут быть использованы для вызова функции, например \mintinline{icl}{func ((2.0, 3.2) : int)}.

\mintinline{icl}{(value...) : (type...)} - преобразует каждое запакованное значение в нужном типа данных, количество значений в обоих пакетов должна совпадать. Возвращает также запакованное значения.

Возможные исключения: \ferror{UnrealCast}, \ferror{ParsingFailed}, \ferror{EmptyList}, \ferror{MultiList}, \ferror{IncompatibleObject}, \ferror{IncompatibleRoot} и \ferror{ComplexField} (см. таб. \ref{errors}).

\subsubsection{\mintinline{icl}{data :: type : bool}}

Возвращает \true, если данные имеют нужный тип, иначе \false. Имеет следующие вариации:
\begin{icItems}
	\item \mintinline{icl}{value :: type};
	\item \mintinline{icl}{(value...) :: type};
	\item \mintinline{icl}{(value...) :: (type...)};
\end{icItems}

\subsubsection{\mintinline{icl}{data :* type : bool}}

Возвращает \true, если данные могут быть преобразованы в нужном типе, иначе \false. Имеет следующие вариации:
\begin{icItems}
	\item \mintinline{icl}{value :* type};
	\item \mintinline{icl}{(value...) :* type};
	\item \mintinline{icl}{(value...) :* (type...)};
\end{icItems}

\subsubsection{\mintinline{icl}{data :! type : type}}

\mintinline{icl}{data :! type : type} отличается от \mintinline{icl}{data : type : type} только рангом, обычное преобразование имеет ранг 1 и она выполняется в последнюю очередь, а этот оператор гарантирует немедленное преобразование.

\subsection{Возможные преобразования}

В таблице \ref{castingtable} представлены совместимость преобразовании данных. Минусом отмечены невозможные преобразования, они всегда генерируют ошибку \ferror{UnrealCast}. Плюсом отмечены преобразования, которые никогда не генерируют ошибки. Звёздочкой отмечены возможные преобразования, но они также могут генерировать ошибки. В названии столбцов указан изначальный тип данных, в названии строки указан желаемый тип данных.

\begin{table}[htb]
	\caption{Таблица преобразований}
	\label{castingtable}
	\begin{tabular}{|l|c|c|c|c|c|c|c|c|c|}
		\hline
		          & \void & \bool & \integer & \double & \str & \listtype & \object & \set & \element \\ \hline
		\void     & +     & -     & -        & -       & -    & -         & -       & -    & -        \\ \hline
		\bool     & +     & +     & +        & +       & +    & +         & +       & +    & +        \\ \hline
		\integer  & +     & +     & +        & +       & *    & -         & -       & -    & -        \\ \hline
		\double   & +     & +     & +        & +       & *    & -         & -       & -    & -        \\ \hline
		\str      & +     & +     & +        & +       & +    & *         & +       & +    & +        \\ \hline
		\listtype & +     & -     & -        & -       & +    & +         & -       & +    & -        \\ \hline
		\object   & +     & -     & -        & -       & *    & -         & +       & *    & -        \\ \hline
		\set      & +     & -     & -        & -       & *    & *         & -       & +    & -        \\ \hline
		\element  & +     & -     & -        & -       & -    & -         & -       & -    & +        \\ \hline
	\end{tabular}
\end{table}

\subsubsection{\mintinline{icl}{void : void}}

Возвращает исходный объект.

\subsubsection{\mintinline{icl}{void : bool}}

Возвращает \false.

\subsubsection{\mintinline{icl}{void : int}}

Возвращает \mintinline{icl}{0}.

\subsubsection{\mintinline{icl}{void : double}}

Возвращает \mintinline{icl}{0.0}.

\subsubsection{\mintinline{icl}{void : string}}

Возвращает \mintinline{icl}{""}.

\subsubsection{\mintinline{icl}{void : list}}

Возвращает \mintinline{icl}{[]}.

\subsubsection{\mintinline{icl}{void : object}}

Возвращает \mintinline{icl}{[=]}.

\subsubsection{\mintinline{icl}{void : set}}

Возвращает \mintinline{icl}{[:]}.

\subsubsection{\mintinline{icl}{void : element}}

Возвращает пустую коллекцию.

\subsubsection{\mintinline{icl}{bool : bool}}

Возвращает исходный объект.

\subsubsection{\mintinline{icl}{bool : int}}

Возвращает \mintinline{icl}{1}, если логическое значение - единица, иначе \mintinline{icl}{0}.

\subsubsection{\mintinline{icl}{bool : double}}

Возвращает \mintinline{icl}{1.0}, если логическое значение - единица, иначе \mintinline{icl}{0.0}.

\subsubsection{\mintinline{icl}{bool : string}}

Возвращает \mintinline{icl}{"true"}, если логическое значение - единица, иначе \mintinline{icl}{"false"}.

\subsubsection{\mintinline{icl}{int : bool}}

Возвращает значение выражений \mintinline{icl}{int != 0}.

\subsubsection{\mintinline{icl}{int : int}}

Возвращает исходный объект.

\subsubsection{\mintinline{icl}{int : double}}

Возвращает вещественное число, имеющее целая часть равна \integer, а дробная равна нулю.

\subsubsection{\mintinline{icl}{int : string}}

Возвращает строку, содержащая строковое представление числа \integer.

\subsubsection{\mintinline{icl}{double : bool}}

Возвращает значение выражений \mintinline{icl}{double != 0.0}.

\subsubsection{\mintinline{icl}{double : int}}

Возвращает целое число, равна целой части числа \double. Дробная часть пропадёт.

\subsubsection{\mintinline{icl}{double : double}}

Возвращает исходный объект.

\subsubsection{\mintinline{icl}{double : string}}

Возвращает строку, содержащая строковое представление числа \double.

\subsubsection{\mintinline{icl}{string : bool}}

Возвращает значение выражений \mintinline{icl}{!string'empty}.

\subsubsection{\mintinline{icl}{string : int}}

Возвращает целое число, являющейся результат парсинга строки \str.

Возможные исключения: \ferror{ParsingFailed} (см. таб. \ref{errors}).

\subsubsection{\mintinline{icl}{string : double}}

Возвращает вещественное число, являющейся результат парсинга строки \str. Целая часть от дробной делить надо точкой, а не запятой.

Возможные исключения: \ferror{ParsingFailed} (см. таб. \ref{errors}).

\subsubsection{\mintinline{icl}{string : string}}

Возвращает исходный объект.

\subsubsection{\mintinline{icl}{string : list}}

Возвращает \mintinline{icl}{[string]}.

\subsubsection{\mintinline{icl}{string : object}}

Возвращает объект, являющийся результат парсинга JSON-строки \str. JSON-объект должен иметь поля только следующих типов: \bool, \integer, \double, \str{} и \listtype.

Возможные исключения: \ferror{ParsingFailed}, \ferror{IncompatibleRoot} и \ferror{ComplexField} (см. таб. \ref{errors}).

\subsubsection{\mintinline{icl}{string : set}}

Возвращает множество, являющийся результат парсинга JSON-строки \str, которая должна содержать массив объект, а каждый объект должен соответствовать критерия оператора \mintinline{icl}{string : object}.

Возможные исключения: \ferror{ParsingFailed}, \ferror{IncompatibleObject}, \ferror{IncompatibleRoot} и \ferror{ComplexField} (см. таб. \ref{errors}).

\subsubsection{\mintinline{icl}{list : bool}}

Возвращает значение выражений \mintinline{icl}{!list'empty}.

\subsubsection{\mintinline{icl}{list : string}}

Возвращает первую строку списка, если список состоит только из одной строки, иначе генерирует исключение.

Возможные исключения: \ferror{EmptyList} и \ferror{MultiList} (см. таб. \ref{errors}).

\subsubsection{\mintinline{icl}{list : list}}

Возвращает исходный объект.

\subsubsection{\mintinline{icl}{list : set}}

Каждая строка списка будет преобразовано в объекте оператором \mintinline{icl}{string : object}, получены объекты будут группированы в множестве, полученная множество будет возвращена оператором.

\subsubsection{\mintinline{icl}{object : bool}}

Возвращает \true, если объект хранит хотя бы одну переменную, иначе \false.

\subsubsection{\mintinline{icl}{object : string}}

Возвращает JSON-строку, описывающая объект.

\subsubsection{\mintinline{icl}{object : object}}

Возвращает исходный объект.

\subsubsection{\mintinline{icl}{set : bool}}

Возвращает значение выражений \mintinline{icl}{!set'empty}.

\subsubsection{\mintinline{icl}{set : string}}

Возвращает JSON-строку, описывающая множеству.

\subsubsection{\mintinline{icl}{set : object}}

Возвращает единственный объект, если множество содержит только один объект, иначе генерирует исключение.

Возможные исключения: \ferror{EmptySet} и \ferror{MultiSet} (см. таб. \ref{errors}).

\subsubsection{\mintinline{icl}{set : list}}

Возвращает список JSON-строк, где каждая строка описывает объект множества.

\subsubsection{\mintinline{icl}{set : set}}

Возвращает исходный объект.

\subsubsection{\mintinline{icl}{element : bool}}

Возвращает значение выражений \mintinline{icl}{!element'empty}.

\subsubsection{\mintinline{icl}{element : string}}

Возвращает строка, описывающая последовательность действий, при которых была получена данная коллекция.

\subsubsection{\mintinline{icl}{element : element}}

Возвращает исходный объект.
