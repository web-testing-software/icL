% !TeX spellcheck = ru_RU
\input{part-01-0-advanced-users}

\section{Базовый синтаксис}

icL достаточно прост в освоении, вставьте код с листинга \ref{first} в icL и выполняйте его. Первую программу можно уже сохранить в файле с расширением \textit{icL}.

\begin{lstlisting}[caption=Первая программа, label=first]
Log.info "Test!";
\end{lstlisting}

В консоль можем увидеть следующий \textbf{вывод программы}:

\begin{lstlisting}[numbers=none]
Test!
\end{lstlisting}

\subsection{Импорт в icL}

Все \textbf{стандартные библиотеки} встроены в языке, но можно импортировать \textbf{пользовательские}, с помощью:

\begin{icItems}
\item
	\lstinline|Import.none "project/lib.icL"| - выполнить код, который содержится в файле, ничего не импортировать.
\item
	\lstinline|Import.functions "project/lib.icL"| - выполнить код и импортировать функции; {\color{red}Важно:} импортированные функции не должны использовать глобальные переменные.
\item
	\lstinline|Import.all "project/lib.icL"| -  выполнить код, импортировать функции и глобальные переменные;
\item
	\lstinline|Import.run "project/lib.icL"| - выполнить код в текущем контексте, все функции и глобальные переменные импортируется и экспортируется;
\end{icItems}

\subsection{Токены в icL}

Программа на icL состоит из различных \textbf{токенов} (литералов, семантических конструкций, операторов, разделителях, ключевые слова), а токен может являться ключевым словом, идентификатором, константной, строковым литералом, либо символом. Например следующая команда состоит из четырёх токенов: \lstinline|Log.info "Hello world!";|

Отдельными токенами являются:

\begin{icItems}
\item
	\lstinline|Log| - идентификатор объекта;
\item
	\lstinline|.info| - идентификатор метода;
\item
	\lstinline|"Hello world!"| - строковый литерал;
\item
	\lstinline|;| - разделитель, конец команды.
\end{icItems}

\subsection{Комментарии}

\textbf{Комментарии} - это вспомогательный текст, который помогает понимать код, они полностью игнорируется командного процессора.

\textbf{Комментарии в линии} (\textit{inline}) являются строковым литералом ограниченным специальными кавычками \texttt{`}, как показано на листинге \ref{inlinecomment}.

\begin{lstlisting}[caption=Комментарий в линии,label=inlinecomment]
No comment `comment` no comment
\end{lstlisting}

\textbf{Одиночный комментарий} записывается с использованием символов \texttt{``} в начале, смотрите листинг \ref{linecomment}.

\begin{lstlisting}[caption=Одиночный комментарий,label=linecomment]
No comment `` comment
\end{lstlisting}

\textbf{Многострочный комментарий} начинается и заканчивается с \texttt{```}, пример многострочного комментария приведён на листинге \ref{multilinecomment}.

\begin{lstlisting}[caption=Многострочный комментарий,label=multilinecomment]
No comment
``` comment 1
	comment 2
	comment 3
``` No comment
\end{lstlisting}

\subsection{Идентификторы}

\textbf{Идентификатор} в icL - это имя, используемое для идентификации переменной, функций, методов и свойств. Идентификатор начинается с символов обозначающий его предназначение(\lstinline|@|, \lstinline|#|, \lstinline|.|, \lstinline|'| или с буквой верхнего или нижнего регистра), за которым следует от 0 до 32 букв(английского или национального алфавита), цифр (от 0 до 9) или нижнее подчёркивание.

icL - чувствительный к регистру язык. Таким образом \textit{@var} и \textit{@Var} являются двумя разными идентификаторами. Вот несколько примеров допустимых идентификаторов:

\begin{lstlisting}[numbers=none]
#loop		Tab		    .append		'length	Doc	    @i	 	@VAR
@variable	sumPoints	#global		.merge	.get	#01		sin
\end{lstlisting}

\subsection{Ключевые слова}

В icL \textbf{ключевые слова} зарезервированные. Их всего 18: \lstinline|if|, \lstinline|else| \lstinline|for|, \lstinline|filter|, \lstinline|range|, \lstinline|exists|, \lstinline|while|, \lstinline|do|, \lstinline|any|, \lstinline|emit|, \lstinline|emiter|, \lstinline|slot|, \lstinline|jammer|, \lstinline|listen|, \lstinline|wait|, \lstinline|switch|, \lstinline|case| и \lstinline|assert|. В данном документе они выделены синим цветом.

\subsection{Пробельные символы и разделители}

\textbf{Пробельный символ} (\textit{whitespace}) - этот термин используется в icL для описания пробелов, символов табуляции, символов новой строкой и комментариев. Пробельные символы не обязательные, они используются для улучшения читабельности кода. На листинге \ref{unreadable} показан пример кода без пробельных символов, а на листинге \ref{readable} с пробельными символами.

\begin{lstlisting}[caption=Koд без пробельных символов,label=unreadable]
if(Tab.get"mai.ru"){Doc.query("button").click();}else{Log.error"The site mai.ru is unaviable";};
\end{lstlisting}

В icL присутствует \textbf{разделитель команд} \lstinline|;|, его можно пропустить, но не рекомендуется. Команда - это набор токенов, распределенных в определённом порядке и характеризующее действие. Примеры команд: открыть сайт - \lstinline|Tab.get "URL"|, закрыть вкладку - \lstinline|Tab.close|.

При описании последовательности действий, их надо разделить, например последовательность вышеперечисленных команд описывается так:
\begin{lstlisting}[numbers=none]
Tab.get "URL"; Tab.close()
\end{lstlisting}

\begin{lstlisting}[caption=Koд с пробельных символов,label=readable]
`` the begin of program

`` try to go to mai.ru
if (Tab.get "mai.ru") {
	`` site loaded successfull
	`` click the button
	Doc.query("button").click();
}
else {
	`` try again later
	`` now log the error
	Log.error "The site mai.ru is unaviable";
};

`` end of the program
\end{lstlisting}

Таким образом из команд собираем сценарии.
